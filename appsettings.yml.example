# SS14.Watchdog Configuration - Example File
# Copy this file to appsettings.yml and modify the values for your deployment
# This file should be placed at the path specified by WATCHDOG_APPSETTINGS_PATH in .env

# Important: BaseUrl should be the internal URL for server-to-watchdog communication
# The external public URL is handled by Traefik routing
BaseUrl: "http://localhost:5000/"

# Serilog logging configuration
Serilog:
  Using: [ "Serilog.Sinks.Console", "Serilog.Sinks.Loki" ]
  MinimumLevel:
    Default: Information
    Override:
      SS14: Debug
      Microsoft: Warning
      Microsoft.Hosting.Lifetime: Information
      Microsoft.AspNetCore: Warning

  WriteTo:
    - Name: Console
      Args:
        OutputTemplate: "[{Timestamp:HH:mm:ss} {Level:u3} {SourceContext}] {Message:lj}{NewLine}{Exception}"

  # Optional Loki Configuration (uncomment to enable)
  # Loki:
  #   Address: "http://localhost:3100"
  #   Name: "YourServerName"

# Discord Notifications (optional)
# Notification:
#   DiscordWebhook: "https://discord.com/api/webhooks/YOUR_WEBHOOK_ID/YOUR_WEBHOOK_TOKEN"

# Data configuration - using SQLite
Data:
  File: "data.db"

# Process management configuration
Process:
  # Set to true to persist server processes (like systemctl)
  PersistServers: true
  # Use Basic mode in Docker (systemd mode won't work in containers)
  Mode: "Basic"

# Server instances configuration
Servers:
  # This maps to the volume mount at /app/instances
  InstanceRoot: "instances/"
  
  Instances:
    # Example server instance configuration
    # Each key becomes a subdirectory under your instances path
    example_server:
      Name: "Example Server Name"
      ApiToken: "CHANGE_THIS_TO_SECURE_TOKEN"
      ApiPort: 1212
      UpdateType: "Manifest"
      Updates:
        ManifestUrl: "https://wizards.cdn.spacestation14.com/fork/wizards/manifest"
      TimeoutSeconds: 90
      # Additional arguments for the server process
      Arguments: []
      # Environment variables for the server process
      EnvironmentVariables: {}

    # Add more server instances as needed:
    # second_server:
    #   Name: "Second Server"
    #   ApiToken: "ANOTHER_SECURE_TOKEN"
    #   ApiPort: 1213
    #   UpdateType: "Manifest"
    #   Updates:
    #     ManifestUrl: "https://your-cdn.example.com/fork/your-fork/manifest"
    #   TimeoutSeconds: 90

AllowedHosts: "*"

# ===========================================
# SECURITY NOTICE
# ===========================================
# DO NOT commit your actual appsettings.yml file to GitHub!
# It contains sensitive information like:
# - API tokens
# - Discord webhook URLs
# Always use this appsettings.yml.example as a template.
